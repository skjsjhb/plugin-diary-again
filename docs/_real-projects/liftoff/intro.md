---
sidebar_position: 1
---

# LT-1 实质性欢迎

## 欢迎新玩家……再一次

我们已经制作了能向整个服务器广播新玩家到来的插件，如果想要更热情一点，把玩家的名字改成大写，再在后面加上几个感叹号也是完全 OK 的。不过，言语上的欢迎只是一种形式，比聊天消息更能打动人心的，当然还是发给玩家一些~~下界合金块~~ Nyaci，不要再随便改我的稿件了！咳，让大家看笑话了，不过许多服务器确实也都会提供给玩家所谓的**初始套装**，例如一套石质装备加上一些面包等。

:::tip 在游戏背后

*在今后，我们会使用这样的提示框来介绍一些插件设计背后的游戏原理，这样大家就能更了解插件的每个功能对服务器游戏性的影响。*

初始套装插件的普及，主要是对于单人游戏中奖励箱的模仿。虽然徒手撸树是许多单人 Minecraft 玩家的信仰，不过在大多数生存服务器上，从头开荒是有些麻烦的 —— 玩家可能要探索主城之外相当的一段距离才能找到还没被占据的地方，旅途中不乏凶险，尤其是在允许 PVP 的服务器上。

让玩家第一时间能对服务器产生好感是一件很重要的事情，发给玩家的初始装备在实际上能提供的帮助并不算多，在生电后期铁块按盒装车时更是几乎可以忽略，但玩家会觉得“这个服务器还是非常关心玩家的”，就更有可能留在服务器上游玩。

顺便一提，Aluka 会给我们服务器上的每个新玩家赠送一个她的玩家头颅哦！

:::

在最早的一批服务器中，初始套装是由管理员手动发放的，后来也衍生出一些使用命令方块发放的技术。如今，基于插件实现的初始套装系统已经广泛应用在各种服务器中，通常使用 `/kit` 就能领取。一些注重仪式感的服务器则会把它们放在玩家的末影箱中，或者发给兑换券之类的凭据供玩家稍后兑换。

## 礼包的艺术

Aluka 本人非常支持极简主义，因此在我们的服务器上，初始套装的功能已经被整合到背包插件中了，作为初始物品栏的一部分。不过，为了作为教学的例子，我们把这个功能单独拿出来，在这里作为一个独立的项目：

> **初始套装（Liftoff）**
>
> 向服务器上的新玩家发放预先设定的初始套装。
>
> - 玩家将使用 `/kit` 领取套装。
> - 初始套装只能领取一次，插件应当记录已经领取的玩家。
> - 发放的物品将直接进入玩家的物品栏，不足以放下时则掉落在周围。
> - 管理员使用 `/kitmod` 命令可以打开一个物品栏，在其中可以编辑初始套装物品。
> - 在领取初始套装或修改初始套装后，应当反馈相应的消息。

虽然我们还可以给它扩展更多的功能，不过这些设计已经足够大家非常充实地度过这一章了，所以我们还是先一步一步来吧（笑）。

## 创建项目

和以前做的一样，我们新建一个项目，相应修改配置，添加 Gradle 任务（可选）等，这些你都应该已经非常熟悉了。在今后，我们默认你已经完全了解如何为每个插件创建新项目，所以就不会再提醒这一点了。

在第二话中，我们已经了解了如何使用包来组织代码，因此接下来的项目中我们都会这样做。作为示例，笔者所用的代码都以 `moe.skjsjhb.mc.plugins.插件名` 作为包名，但你完全可以使用不同的名称 —— 只是要记得修改代码的相应部分。

`plugin.yml` 内容如下，由于要使用命令，因此我们相应填写 `commands` 键的内容：

```yaml
name: liftoff
description: Welcome your player with predefined kits.
author: skjsjhb
website: https://bpd.skjsjhb.moe/docs/real-projects/liftoff/intro
version: 1.0
main: moe.skjsjhb.mc.plugins.liftoff.Liftoff    # 根据实际情况修改
api-version: 1.21

commands:
  kit:
    usage: /kit
    description: Gets the starter kit.
  kitmod:
    usage: /kitmod
    description: Modifies starter kit content.
```

比较特别的是，这个插件没有 `config.yml`，因为并没有需要配置的内容。当然，在实际的应用中，插件肯定要能允许自定义发给玩家的消息内容，不过现在还是让我们暂时把重点放在功能的实现上，在后续的项目中再来关注这一点。

插件的主类定义如下：

```kotlin
package moe.skjsjhb.mc.plugins.liftoff

import org.bukkit.plugin.java.JavaPlugin

class Liftoff : JavaPlugin() {
    override fun onEnable() {
    }

    override fun onDisable() {
    }
}
```

我们没有再继续使用 `Main` 这样含糊不清的名称，而是使用插件名作为主类名，这样我们（和其他人）就能更好分辨出插件的主类。像这样学会改名字可是做出新东西的重要一步（笑）！
