---
sidebar_position: 9
---

# LT-6 测试和运行

虽然原本我们应该使用 MockBukkit 来验证一下代码的正确性的，但遗憾的是，截至本书编写的时候，MockBukkit 还没有对 `Inventory` 及其相关的操作提供支持，因此我们就跳过这一步，直接来进行手动测试。

*由于今后的项目功能会越来越复杂，将每个功能的测试结果一一以图片形式展示非常耗费篇幅，因此在不必要的情况下，我们就不再单独添加图片了。*

启动客户端和服务器（如果你不是使用 Gradle 任务来启动，那么还需要手动安装插件），并加入其中。随后，按以下几个步骤验证功能的正确性：

1. 如果你先前已经把自己设为管理员了，那么先使用 `/deop` 暂时取消。
2. 使用 `/kitmod` 命令，你会得到权限不足的提示。
3. 重新将自己设为管理员。
4. 再次使用 `/kitmod` 命令，将正确显示物品栏。
5. 向物品栏内放入至少两件物品，并关闭物品栏。
6. 将自己的物品栏填满（包括快捷栏），只留下一个空格子。
6. 使用 `/kit` 命令，一件物品将加入你的物品栏，另一件应该掉落在脚下。
7. 再次使用 `/kit` 命令，插件将拒绝重复领取。

当然这只是推荐的顺序，你也可以选择其它喜好的方式完成这些功能的测试。

---

那么，到这里，这个插件的基础功能也就完成了！如果是在第一话，到这里我们就可以圆满画上一个句号了，不过，像这样做出来的插件，也就仅仅是个**原型**，只包含了一些最基本的功能。虽然理论上是达成了设计目标，但实际上大家用一用就会发现一些问题：

- 管理员修改套装时会消耗自身物品。
- 如果有多名管理员同时修改套装，将存在先后次序的竞争问题。
- 在游戏中，没办法重置玩家的领取状态。
- 在游戏中，没办法查询某个玩家是否已经领取过套装。

*我们暂且忽略了无法自定义消息和不支持多语言的问题，因为要实现这部分功能，必须先了解 Component API，这将在下一个项目中介绍。*

在第一话中，我们可以说“哎呀，对初学者的要求就不要那么多了”，但大家现在毕竟也算是专业人士了，不能就这样草草了事（笑）。我们必须在原型的基础上继续完善，所以请大家稍作休息，我们在后面几个小节处理这些问题。